animation trigger: shopkeep_talk
{
	change_speaker Chr_Samurai_SamuraiWarrior_01
	typewriter "What's up groovy cuties!? Welcome to my shop!\nEverything here is available for sale. Lotta good stuff if you don't mind me saying."
}

animation trigger: trainer_talk
{
	change_speaker Chr_Vikings_ShieldMaiden_01
	typewriter "You want to get ripped? I'll make you strong. Stronger than anyone."
	buff_stats
}

animation trigger: stylist_talk
{
	change_speaker Chr_Fantasy_Bard_01
	typewriter text: "Not happy with your Questers Only matches? For a few gems, I can shuffle them around for you.", keep_open: true
	typewriter text: "Fair warning, if you currently have a companion they'll probably ditch you."
	increase_attraction message: "Shuffle your Questers Only matches? Your current companion will leave you. :(", cost: 3, success: stylist_success, fail: stylist_fail, effect: shuffle_matches
}

animation trigger: stylist_success
{
	change_speaker Chr_Fantasy_Bard_01
	typewriter "Hot hot hot! Check out QuestR for new potential matches. ;)"
}

animation trigger: stylist_fail
{
	change_speaker Chr_Fantasy_Bard_01
	typewriter "You trying to put the hustle on me?! Get outta here! Go on, get!"
}

animation trigger: trainer_success
{
	change_speaker Chr_Vikings_ShieldMaiden_01
	typewriter "Lookin swoll! Go flex your new muscles by beating up some goblins."
}

animation trigger: trainer_fail
{
	change_speaker Chr_Vikings_ShieldMaiden_01
	typewriter "I oughtta beat you within an inch of your life for wasting my time."
}

animation trigger: activate_shrine
{
	change_speaker none
	typewriter shrine_message
	generic_choice text: "Take the bargain?", button1: yes, button1_text: Yes, button2: no, button2_text: No
}


animation trigger: intro_ready
{
	change_speaker Chr_Fantasy_Gypsy_01
	typewriter text: "Isn't it a lovely day for a stroll through the forest?", keep_open: true
	typewriter "Use the [ACTION_MOVE] to move."
}

animation trigger: intro_first_enemy_seen
{
	change_speaker Chr_Fantasy_Gypsy_01
	typewriter text: "A skeleton! Let's rough him up. Simply walk into an enemy to attack it.", keep_open: true
	typewriter text: "He'll probably start fighting back, but don't worry - I'll protect you."
}

animation trigger: intro_boss_seen
{
	change_speaker Chr_Fantasy_Gypsy_01
	typewriter text: "That guy looks... tough. But don't worry. We can hit him at a distance with my spell!", keep_open: true
	typewriter text: "Get within 3 squares of him and use the [ACTION_SPELL] button to activate my spell.", keep_open: true
	typewriter text: "Don't worry if you miss. The spell will recharge after a few seconds."
}

animation trigger: intro_boss_activated
{
	camera_shake intensity: 0.35, speed: 5, seconds: 1
	spawn_prefab prefab: "FallingRock", x: 10, y: 3
	spawn_prefab prefab: "FallingRock", x: 10, y: 4
	spawn_prefab prefab: "FallingRock", x: 10, y: 5
	spawn_prefab prefab: "FallingRock", x: 10, y: 6
	spawn_prefab prefab: "FallingRock", x: 10, y: 7

	change_speaker Chr_Fantasy_Gypsy_01
	typewriter "Oh crap. He sees us now. This is... really bad."
}

animation trigger: boss1_intro
{
	camera_shake intensity: 0.35, speed: 5, seconds: 1
}

animation trigger: boss2_intro
{
	camera_shake intensity: 0.35, speed: 5, seconds: 1
}

animation trigger: boss3_intro
{
	camera_shake intensity: 0.35, speed: 5, seconds: 1
}

animation trigger: boss1_death
{
	set_saved_flag boss1_defeated
	camera_shake intensity: 0.4, speed: 5, seconds: 2
}

animation trigger: boss2_death
{
	set_saved_flag boss2_defeated
	camera_shake intensity: 0.4, speed: 5, seconds: 2
}

animation trigger: boss3_death
{
	set_saved_flag boss3_defeated
	camera_shake intensity: 0.4, speed: 5, seconds: 2
}

animation trigger: Character_Beats
{
	change_speaker MiniCharacter_GamerGirl_01
	typewriter text: "Like my headphones? Yea, they're pretty rad.", keep_open: true
	typewriter text: "Come see me in town and we can chat music!"
	set_saved_flag beats
	remove_npc char_beats
}

animation trigger: Character_HotDogMan
{
	change_speaker MiniCharacter_HotdogMan_01
	typewriter text: "I know what you're thinking. How could I, the world's most handsome man, be found in a place like this?", keep_open: true
	typewriter text: "The answer may shock you.", keep_open: true
	typewriter text: "Come see me in town and I'll tell you the whole story."
	set_saved_flag hotdogman
	remove_npc char_hotdogman
}

animation trigger: Character_PunkyPeter
{
	change_speaker MiniCharacter_PunkGuy_01
	typewriter text: "Hey heyyy, I'm Punky Peter! I'm gonna bail from this goblin fest.", keep_open: true
	typewriter text: "Come find me in town. I'll hook you up right!"
	set_saved_flag punkypeter
	remove_npc char_punkypeter
}

animation trigger: Character_Trainer
{
	change_speaker Chr_Vikings_ShieldMaiden_01
	typewriter text: "Wanna get strong? Stronger than anyone ever was?", keep_open: true
	typewriter text: "See me in town. I'll train you right up."
	set_saved_flag trainer
	remove_npc char_trainer
}

animation trigger: Character_Stylist
{
	change_speaker Chr_Fantasy_Bard_01
	typewriter text: "Hi there cutie! You're lookin' fine.", keep_open: true
	typewriter text: "This dungeon is lame. I'm going back to town. Come say hey!"
	set_saved_flag stylist
	remove_npc char_stylist
}

animation trigger: Hub_Reload
{
	set key: item_purchased, value: false
	
	flag_set boss1_defeated
	{
		flag_unset cave_biome_revealed
		{
			set_saved_flag cave_biome_revealed
			play reveal_cave_biome
		}
	}

	flag_set boss2_defeated
	{
		flag_unset scifi_biome_revealed
		{
			set_saved_flag scifi_biome_revealed
			play reveal_scifi_biome
		}
	}
}

animation id: reveal_cave_biome, trigger: reveal_cave_biome
{
	move_camera target: cave_reveal_transform, time: 2
	wait_seconds 3

	enable cave_dungeon
	camera_shake intensity: 1, speed: 5, seconds: 2
	move_to target: cave_dungeon, source: cave_reveal_source, destination: cave_reveal_target
}

animation id: reveal_scifi_biome, trigger: reveal_scifi_biome
{
	move_camera target: scifi_reveal_transform, time: 2
	wait_seconds 3

	enable scifi_dungeon
	disable scifi_dungeon_inner1
	disable scifi_dungeon_inner2

	camera_shake intensity: 1, speed: 5, seconds: 2
	move_to target: spaceship, source: spaceship_reveal_source, destination: spaceship_reveal_target

	wait_seconds 2

	enable ship_energy
	enable scifi_dungeon_inner1
	enable scifi_dungeon_inner2
}

animation trigger: Hub_PunkyPeter
{
	change_speaker MiniCharacter_PunkGuy_01

	flag_set item_purchased
	{
		typewriter text: "You've already got an item from me, I ain't your personal shopper."
	}

	flag_unset item_purchased
	{
		typewriter text: "If you've got some gems to spare, I can grab an item from this well for you to take into the dungeon.", keep_open: true
		typewriter text: "Can't promise it will be good, but it will be... an item."
		cost_dialog message: "Purchase a random item for your next dungeon adventure?", cost: 10, success: punkypeter_success, fail: punkypeter_fail, effect: random_item
	}
}

animation trigger: punkypeter_success
{
	set key: item_purchased, value: true

	change_speaker MiniCharacter_PunkGuy_01
	typewriter "Now go, ye, unto that dungeon, and be excellent!"
}

animation trigger: punkypeter_fail
{
	change_speaker MiniCharacter_PunkGuy_01
	typewriter "Ahem, I think you'll need a few more gems plz thx."
}

animation trigger: Hub_HotDogMan
{
	change_speaker MiniCharacter_HotdogMan_01
	typewriter text: "Want me to tell you one of my worldclass jokes? Yea you do.", keep_open: true
	typewriter text: "It doesn't have any practical purpose, but it'll put a smile on your face!"
	cost_dialog message: "Hear a joke?", cost: 1, success: hotdogman_success, fail: hotdogman_fail, effect: random_joke
}

animation trigger: hotdogman_success
{
	change_speaker MiniCharacter_HotdogMan_01
	random_joke
}

animation trigger: hotdogman_fail
{
	change_speaker MiniCharacter_HotdogMan_01
	typewriter text: "Seriously? Get out of here. GO ON! GIT!!!"
}

animation trigger: Hub_Beats
{
	change_speaker MiniCharacter_GamerGirl_01
	flag_unset dance_purchased
	{
		typewriter text: "Sometimes, no matter how bad the world gets, the only thing to do is dance. Y'know?", keep_open: true
		typewriter text: "For a modest fee that is not at all unreasonable (I promise), I can teach you one of my dances.", keep_open: true
		typewriter text: "I wonder if it could be useful in the dungeon?"
		cost_dialog message: "Learn a new groove?", cost: 32, success: beats_success, fail: beats_fail, effect: learn_dance
	}

	flag_set dance_purchased
	{
		typewriter text: "DANCE WITH ME, YOU FOOL!"
	}
}

animation trigger: beats_success
{
	change_speaker MiniCharacter_GamerGirl_01
	typewriter text: "Righteous! Press [ACTION_DANCE] at any time to start dancing."
	set_saved_flag dance_purchased
}

animation trigger: beats_fail
{
	change_speaker MiniCharacter_GamerGirl_01
	typewriter text: "If you wanna learn these moves, I gotta get paid."
}

animation trigger: hub_tutorial
{
	wait_seconds 1
	change_speaker none
	enable tutorial_overlay
	typewriter text: "Did you lose your adventuring partner to a roaming pack of skeletons? Have I got the answer for you!", keep_open: true
	enable questr_display
	typewriter text: "Introducing QUESTERS ONLY!!! The hot new mobile app for finding dungeon diving companions.", keep_open: true
	disable questr_display
	questr_tutorial true
	enable questr
	typewriter text: "It's simple! Swipe left on matches that are grody, and swipe right on someone you want to tag along.", keep_open: true
	questr_moreinfo true
	typewriter text: "Every match has a Spell, Passive Boost, and Quirk that they bring to the party.", keep_open: true
	typewriter text: "The Quirks can really change the whole dungeon dynamic, so watch out for them!", keep_open: true
	questr_moreinfo false
	typewriter text: "When you're ready, go ahead and find the match that's right for your next dungeon exploration!"
	questr_tutorial false
	disable tutorial_overlay
}